=================== test session starts ===================
platform win32 -- Python 3.13.11, pytest-9.0.2, pluggy-1.6.0 -- C:\Users\leo89\AppData\Local\Programs\Python\Python313\python.exe
cachedir: .pytest_cache
PyQt6 6.10.1 -- Qt runtime 6.10.1 -- Qt compiled 6.10.0
rootdir: D:\code\stock
configfile: pyproject.toml
plugins: cov-7.0.0, qt-4.5.0
collecting ... collected 70 items

tests/integration/test_market_data.py::test_market_snapshot PASSED [  1%]
tests/integration/test_market_data.py::test_market_indices PASSED [  2%]
tests/integration/test_market_data.py::test_all_method PASSED [  4%]
tests/integration/test_market_snapshot.py::test_market_snapshot_detail PASSED [  5%]
tests/integration/test_realtime.py::test_realtime_comparison PASSED [  7%]
tests/integration/test_simple_extraction.py::test_extraction PASSED [  8%]
tests/integration/test_updater_extraction.py::test_updater_extraction PASSED [ 10%]
tests/smoke/test_gui_smoke.py::test_main_window_init PASSED [ 11%]
tests/test_auto_start.py::test_auto_start PASSED     [ 12%]
tests/test_core_fetcher.py::TestStockDataFetcher::test_fetch_hk_stock_logic PASSED [ 14%]
tests/test_core_fetcher.py::TestStockDataFetcher::test_fetch_multiple_stocks PASSED [ 15%]
tests/test_core_fetcher.py::TestStockDataFetcher::test_fetch_single_a_stock PASSED [ 17%]
tests/test_core_service.py::TestStockDataService::test_get_multiple_stocks_data PASSED [ 18%]
tests/test_core_service.py::TestStockDataService::test_get_stock_data_single PASSED [ 20%]
tests/test_core_service.py::TestStockDataService::test_process_stock_data PASSED [ 21%]
tests/test_core_validator.py::TestStockDataValidator::test_handle_special_cases PASSED [ 22%]
tests/test_core_validator.py::TestStockDataValidator::test_is_valid_invalid_data PASSED [ 24%]
tests/test_core_validator.py::TestStockDataValidator::test_is_valid_valid_data PASSED [ 25%]
tests/test_core_validator.py::TestStockDataValidator::test_validate_required_fields PASSED [ 27%]
tests/test_di_container.py::TestDIContainer::test_automatic_resolution PASSED [ 28%]
tests/test_di_container.py::TestDIContainer::test_factory_registration PASSED [ 30%]
tests/test_di_container.py::TestDIContainer::test_get_with_auto_creation PASSED [ 31%]
tests/test_di_container.py::TestDIContainer::test_singleton_registration PASSED [ 32%]
tests/test_exception_handling.py::test_safe_call_handles_exception PASSED [ 34%]
tests/test_fetcher.py::TestStockFetcher::test_fetch_a_stocks_limit PASSED [ 35%]
tests/test_fetcher.py::TestStockFetcher::test_fetch_hk_stocks_parsing PASSED [ 37%]
tests/test_helpers.py::TestHelpers::test_format_stock_code PASSED [ 38%]
tests/test_helpers.py::TestHelpers::test_get_stock_emoji PASSED [ 40%]
tests/test_helpers.py::TestHelpers::test_is_equal PASSED [ 41%]
tests/test_lru_cache.py::TestLRUCacheMechanism::test_cache_size_limit_should_work PASSED [ 42%]
tests/test_lru_cache.py::TestLRUCacheMechanism::test_different_stock_data_request_should_not_hit_cache PASSED [ 44%]
tests/test_lru_cache.py::TestLRUCacheMechanism::test_edge_cases_empty_data PASSED [ 45%]
tests/test_lru_cache.py::TestLRUCacheMechanism::test_edge_cases_none_values PASSED [ 47%]
tests/test_lru_cache.py::TestLRUCacheMechanism::test_get_stock_list_data_integration PASSED [ 48%]
tests/test_lru_cache.py::TestLRUCacheMechanism::test_same_stock_data_request_should_hit_cache PASSED [ 50%]
tests/test_market_manager.py::TestMarketManager::test_get_market_status PASSED [ 51%]
tests/test_market_manager.py::TestMarketManager::test_get_refresh_interval PASSED [ 52%]
tests/test_market_manager.py::TestMarketManager::test_initialization PASSED [ 54%]
tests/test_market_manager.py::TestMarketManager::test_is_market_open PASSED [ 55%]
tests/test_market_worker.py::TestMarketStatsWorker::test_calculate_stats PASSED [ 57%]
tests/test_market_worker.py::TestMarketStatsWorker::test_worker_run_flow PASSED [ 58%]
tests/test_price_fallback.py::TestPriceFallback::test_processor_fallback_none PASSED [ 60%]
tests/test_price_fallback.py::TestPriceFallback::test_processor_fallback_zero PASSED [ 61%]
tests/test_price_fallback.py::TestPriceFallback::test_processor_normal PASSED [ 62%]
tests/test_refresh_worker.py::TestRefreshWorker::test_worker_uses_stock_manager PASSED [ 64%]
tests/test_refresh_worker.py::TestRefreshWorker::test_worker_cycle PASSED [ 65%]
tests/test_stock_data.py::TestStockData::test_enrich_pinyin PASSED [ 67%]
tests/test_stock_data.py::TestStockData::test_load_stock_data PASSED [ 68%]
tests/test_stock_data_source.py::TestStockDataSourceInterface::test_interface_methods PASSED [ 70%]
tests/test_stock_data_source.py::TestStockDatabaseSource::test_get_all_stocks_empty PASSED [ 71%]
tests/test_stock_data_source.py::TestStockDatabaseSource::test_get_stock_by_code_not_found PASSED [ 72%]
tests/test_stock_data_source.py::TestStockDatabaseSource::test_get_stocks_by_market_type_empty PASSED [ 74%]
tests/test_stock_data_source.py::TestStockDatabaseSource::test_search_stocks_empty PASSED [ 75%]
tests/test_stock_db.py::TestStockDatabase::test_insert_mixed_new_and_existing PASSED [ 77%]
tests/test_stock_db.py::TestStockDatabase::test_insert_stocks_batch PASSED [ 78%]
tests/test_stock_db.py::TestStockDatabase::test_update_existing_stocks PASSED [ 80%]
tests/test_stock_manager.py::TestStockManager::test_change_detection PASSED [ 81%]
tests/test_stock_model.py::TestStockTableModel::test_alignment PASSED [ 82%]
tests/test_stock_model.py::TestStockTableModel::test_colors PASSED [ 84%]
tests/test_stock_model.py::TestStockTableModel::test_data_display PASSED [ 85%]
tests/test_stock_model.py::TestStockTableModel::test_row_column_count PASSED [ 87%]
tests/test_stock_search.py::TestStockSearchWidget::test_empty_search PASSED [ 88%]
tests/test_stock_search.py::TestStockSearchWidget::test_enrich_pinyin PASSED [ 90%]
tests/test_stock_search.py::TestStockSearchWidget::test_initialization PASSED [ 91%]
tests/test_stock_search.py::TestStockSearchWidget::test_load_stock_data_success PASSED [ 92%]
tests/test_stock_search.py::TestStockSearchWidget::test_search_no_results PASSED [ 94%]
tests/test_stock_search.py::TestStockSearchWidget::test_search_stocks_by_code PASSED [ 95%]
tests/test_stock_search.py::TestStockSearchWidget::test_search_stocks_by_name PASSED [ 97%]
tests/test_stock_search.py::TestStockSearchWidget::test_search_stocks_by_pinyin PASSED [ 98%]
tests/test_update_function.py::test_update_check PASSED [100%]

==================== warnings summary =====================
C:\Users\leo89\AppData\Local\Programs\Python\Python313\Lib\site-packages\pkg_resources\__init__.py:3146
  C:\Users\leo89\AppData\Local\Programs\Python\Python313\Lib\site-packages\pkg_resources\__init__.py:3146: DeprecationWarning: Deprecated call to `pkg_resources.declare_namespace('google')`.
  Implementing implicit namespace packages (as specified in PEP 420) is preferred to `pkg_resources.declare_namespace`. See https://setuptools.pypa.io/en/latest/references/keywords.html#keyword-namespace-packages
    declare_namespace(pkg)

tests/integration/test_market_data.py::test_market_snapshot
  C:\Users\leo89\AppData\Local\Programs\Python\Python313\Lib\site-packages\_pytest\python.py:170: PytestReturnNotNoneWarning: Test functions should return None, but tests/integration/test_market_data.py::test_market_snapshot returned <class 'tuple'>.
  Did you mean to use `assert` instead of `return`?
  See https://docs.pytest.org/en/stable/how-to/assert.html#return-not-none for more information.
    warnings.warn(

tests/integration/test_market_data.py::test_market_indices
  C:\Users\leo89\AppData\Local\Programs\Python\Python313\Lib\site-packages\_pytest\python.py:170: PytestReturnNotNoneWarning: Test functions should return None, but tests/integration/test_market_data.py::test_market_indices returned <class 'tuple'>.
  Did you mean to use `assert` instead of `return`?
  See https://docs.pytest.org/en/stable/how-to/assert.html#return-not-none for more information.
    warnings.warn(

tests/integration/test_market_data.py::test_all_method
  C:\Users\leo89\AppData\Local\Programs\Python\Python313\Lib\site-packages\easyquotation\basequotation.py:57: DeprecationWarning: use market_snapshot instead
    warnings.warn("use market_snapshot instead", DeprecationWarning)

tests/integration/test_market_data.py::test_all_method
  C:\Users\leo89\AppData\Local\Programs\Python\Python313\Lib\site-packages\_pytest\python.py:170: PytestReturnNotNoneWarning: Test functions should return None, but tests/integration/test_market_data.py::test_all_method returned <class 'tuple'>.
  Did you mean to use `assert` instead of `return`?
  See https://docs.pytest.org/en/stable/how-to/assert.html#return-not-none for more information.
    warnings.warn(

tests/test_auto_start.py::test_auto_start
  C:\Users\leo89\AppData\Local\Programs\Python\Python313\Lib\site-packages\_pytest\python.py:170: PytestReturnNotNoneWarning: Test functions should return None, but tests/test_auto_start.py::test_auto_start returned <class 'bool'>.
  Did you mean to use `assert` instead of `return`?
  See https://docs.pytest.org/en/stable/how-to/assert.html#return-not-none for more information.
    warnings.warn(

tests/test_update_function.py::test_update_check
  C:\Users\leo89\AppData\Local\Programs\Python\Python313\Lib\site-packages\_pytest\python.py:170: PytestReturnNotNoneWarning: Test functions should return None, but tests/test_update_function.py::test_update_check returned <class 'bool'>.
  Did you mean to use `assert` instead of `return`?
  See https://docs.pytest.org/en/stable/how-to/assert.html#return-not-none for more information.
    warnings.warn(

-- Docs: https://docs.pytest.org/en/stable/how-to/capture-warnings.html
============= 70 passed, 7 warnings in 16.29s =============

Exit code: 0
