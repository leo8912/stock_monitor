# 更新日志

## [v2.2.6] - 2025-12-12

### 新增
- 🌐 添加备用加速下载源，支持通过https://ghfast.top/镜像源下载更新，提升网络不稳环境下的更新成功率
- 🛡️ 优化网络错误处理逻辑，精确区分"无新版本"和"网络请求失败"两种情况，提供针对性的用户提示

### 优化
- ⚙️ 实现更新源地址配置化管理，默认使用原始GitHub地址，失败时自动切换到镜像源
- 📝 改进用户提示机制，提供更友好的错误提示和重试建议
- ⚙️ 其他设置界面细节BUG优化
## [v2.2.5] - 2025-12-12

### 修复
- 🐛 修复跌停股票封单数显示问题，确保跌停股票能正确显示封单数量
- 🔧 修正跌停判断逻辑，使用正确的卖一量判断条件
- 🔄 统一涨停和跌停封单量计算规则，提高显示一致性
- 🔧 修复开机启动功能

## [v2.2.4] - 2025-12-12

### 修复
- 🐛 修复跌停股票封单数显示问题，确保跌停股票能正确显示封单数量
- 🔧 修正跌停判断逻辑，使用正确的买一量判断条件
- 🔄 统一涨停和跌停封单量计算规则，提高显示一致性

## [v2.2.3] - 2025-12-11

### 修复
- 🔧 修复更新后刷新间隔和开机启动设置被初始化设置覆盖的问题

## [v2.2.2] - 2025-12-11

### 修复
- 🐛 修复设置界面搜索框回车添加股票时覆盖原有列表最后一个股票的问题
- 🔄 修复应用启动后主界面不显示自选股数据的问题
- ⚡ 优化后台刷新线程初始化逻辑，确保应用启动时能正确加载股票数据

## [v2.2.1] - 2025-12-11

### 新增
- 🧪 测试更新功能，验证更新机制的完整性和正确性

## [v2.2.0] - 2025-12-11

### 新增
- 🔧 重构更新机制，统一更新流程管理，避免代码重复
- 🚫 移除主界面自动检查更新功能，仅保留设置中手动更新
- ⚡ 优化两阶段更新策略，提高更新过程的稳定性和可靠性

### 修复
- 🔄 解决更新完成后文件仍留在临时目录的问题
- 📁 修复更新过程中文件路径处理问题，确保文件正确复制到程序目录

## [v2.1.9] - 2025-12-10

### 修复
- 🧪 为测试更新功能，更新版本号和日志

## [v2.1.8] - 2025-12-10

### 修复
- 🐛 修复更新过程中文件路径处理问题，确保更新文件正确解压并复制到程序目录
- 📁 修复配置目录路径问题，确保生产环境配置文件存储在程序目录内，符合绿色软件要求

## [v2.1.7] - 2025-12-10

### 修复
- 🐛 解决更新过程中文件被占用导致的权限错误问题
- 🔄 改进两阶段更新机制，确保完整替换所有文件
- 🧹 实现更新后临时文件自动清理功能
- 🎯 修复环境识别问题，确保打包应用正确识别为生产环境
- 🔄 扩展两阶段更新机制以处理DLL和PYD等动态链接库文件
- 📁 修复配置目录路径问题，确保生产环境使用程序目录而非用户目录

## [v2.1.6] - 2025-12-10

### 修复
- 🐛 解决更新过程中文件被占用导致的权限错误问题
- 🔄 改进两阶段更新机制，确保完整替换所有文件
- 🧹 实现更新后临时文件自动清理功能
- 🎯 修复环境识别问题，确保打包应用正确识别为生产环境
- 🔄 扩展两阶段更新机制以处理DLL和PYD等动态链接库文件
- 📁 修复配置目录路径问题，确保生产环境使用程序目录而非用户目录

## [v2.1.5] - 2025-12-10

### 新增
- 🧪 测试更新功能，增强更新机制的备份和恢复能力

## [v2.1.4] - 2025-12-10

### 修复
- 🐛 修复更新过程中因文件被占用导致的权限错误问题
- 🔄 改进更新机制，特殊处理正在运行的可执行文件

## [v2.1.3] - 2025-12-10

### 修复
- 🐛 修复打包版本中获取港股数据时zhconv库资源文件缺失的问题

## [v2.1.2] - 2025-12-10

### 新增
- 🧪 测试应用更新功能

## [v2.1.1] - 2025-12-10

### 修复
- 🧹 移除更新过程中的备份机制，简化更新流程

## [v2.1.0] - 2025-12-10

### 新增
- 🧪 测试应用更新和重启功能

## [v2.0.9] - 2025-12-10

### 修复
- 🐛 修复GitHub Actions工作流中的编码问题，确保在Windows环境下能正确处理中文字符
- 🔄 修复应用更新后重启仍运行旧版本的问题
- 🔄 优化应用重启机制，优先使用os.execv直接替换进程，失败时回退到subprocess方式

## [v2.0.8] - 2025-12-10

### 修复
- 🐛 修复GitHub Actions工作流中的编码问题，确保在Windows环境下能正确处理中文字符
- 🔄 修复应用更新后重启仍运行旧版本的问题

## [v2.0.7] - 2025-12-10

### 修复
- 🐛 修复GitHub Actions工作流中的编码问题，确保在Windows环境下能正确处理中文字符

## [v2.0.6] - 2025-12-10

### 修复
- 🐛 修复GitHub Actions工作流中更新日志提取失败的问题
- 🔄 修复应用更新后重启仍运行旧版本的问题

## [v2.0.5] - 2025-12-10

### 新增
- 🧪 测试更新功能和日志发布功能

## [v2.0.4] - 2025-12-10

### 修复
- 🐛 修复QTableWidget项重复使用导致的"already owned"错误

## [v2.0.3] - 2025-12-10

### 新增
- 🧪 测试发布日志功能，验证更新日志提取修复是否成功

## [v2.0.2] - 2025-12-10

### 新增
- 🔄 优化GitHub Actions工作流，仅在version.py更新时自动触发构建
- 🚫 移除应用启动时自动检查更新功能，保留手动检查更新

## [v2.0.1] - 2025-12-10

### 新增
- 🛠 修复更新日志提取功能，确保GitHub Actions能正确显示发布说明
- 🧪 修复测试用例，确保与实际代码实现保持同步

## [v2.0.0] - 2025-12-10

### 新增
- 🔥 重大版本升级，引入多项功能改进和性能优化
- 🔄 优化股票数据缓存机制，提高数据获取效率
- 📈 改进港股数据获取和显示功能
- 🔍 增强股票搜索功能，A股数据优先显示
- 🎨 优化界面交互和视觉效果

## [v1.4.1] - 2025-11-11

### 新增
- 🔄 添加定期日志清理功能，自动删除7天前的日志文件，防止日志文件无限增长
- 📖 更新README.md文档，增加测试运行说明和日志清理功能介绍

## [v1.4.0] - 2025-11-07

### 修改
- 清理项目结构，移除无用的空目录和重复文件
- 优化 PyInstaller 打包配置，移除对不存在文件的引用
- 精简设置对话框实现，移除旧版设置对话框代码

## [v1.3.12] - 2025-11-07

### 修改
- 清理项目结构，移除无用的空目录和重复文件
- 优化 PyInstaller 打包配置，移除对不存在文件的引用
- 精简设置对话框实现，移除旧版设置对话框代码

## [v1.3.11] - 2025-11-07

### 修改
- 移除重复的股票数据获取逻辑，统一使用StockManager进行数据获取
- 移除代码中的print语句，统一使用日志记录

## [v1.3.8] - 2025-11-07

### 修改
- 优化win32依赖导入方式，提高跨平台兼容性
- 移除缓存模块中不必要的股票数据验证逻辑
- 优化预加载调度器逻辑

## [v1.3.7] - 2025-11-07

### 新增
- 统一股票信息获取函数，减少代码重复
- 优化设置界面UI设计，提升用户体验

### 修改
- 改进设置对话框布局，增大自选股列表和添加区域
- 优化滚动条样式，采用更现代的细条设计
- 增大界面文字和元素尺寸，提高可读性
- 增加搜索结果展示数量（从20个增加到30个）

## [v1.3.6] - 2025-11-06

### 修改
- 移除实时行情数据的缓存机制，确保每次都从网络获取最新数据
- 简化缓存模块，移除对实时股票数据的完整性验证
- 修复版本号引用错误，将APP_VERSION改为__version__

## [v1.3.5] - 2025-11-05

### 修改
- 增加网络连接初始化延迟时间（从3秒增加到5秒）
- 增强股票数据完整性验证机制
- 改进重试机制（增加重试次数和间隔）
- 优化缓存策略，防止不完整的数据被缓存

## [v1.3.4] - 2025-11-04

### 修改
- 修复系统开机重启后无法获取上证指数和士兰微股票行情的问题
- 优化网络连接检查逻辑
- 增强错误处理和日志记录

## [v1.3.3] - 2025-11-03

### 修改
- 修复港股代码处理逻辑
- 优化数据刷新机制
- 改进错误提示信息

## [v1.3.2] - 2025-11-02

### 修改
- 优化界面布局和显示效果
- 提高数据刷新稳定性
- 改进系统托盘功能

## [v1.3.1] - 2025-11-01

### 修改
- 修复股票数据获取失败的问题
- 优化启动时的网络连接处理
- 改进错误日志记录

## [v1.3.0] - 2025-10-31

### 新增
- 支持港股行情显示
- 添加系统托盘功能

### 修改
- 优化界面显示效果
- 改进数据刷新机制
- 增强错误处理能力

## [v1.2.0] - 2025-10-30

### 新增
- 添加设置对话框
- 支持自定义刷新间隔
- 添加市场开市状态显示

### 修改
- 优化数据获取逻辑
- 改进界面布局
- 增强日志记录功能

## [v1.1.0] - 2025-10-29

### 新增
- 实现股票行情实时监控
- 添加窗口拖动功能
- 支持多只股票同时显示

### 修改
- 优化界面显示效果
- 改进数据刷新机制
- 增强错误处理能力

## [v1.0.0] - 2025-10-28

### 新增
- 初始版本发布
- 实现基本的股票行情显示功能
- 支持上证指数和重点股票监控