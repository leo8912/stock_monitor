# 更新日志

## v1.2.5 (2025-10-29)

### 🎨 优化
- **优化设置界面保存性能**: 将配置保存操作移至后台线程执行，避免阻塞UI线程，显著改善设置界面保存时的响应速度

---

## v1.2.4 (2025-10-28)

### 🎨 优化
- **优化设置界面拖拽性能**: 重构拖拽处理逻辑，添加节流机制避免频繁触发事件，显著改善拖拽时的卡顿问题

---

## v1.2.3 (2025-10-28)

### 🐛 修复
- **修复在线更新后配置丢失问题**: 将配置文件存储位置从程序目录移至用户目录，避免在线更新时用户配置丢失

---

## v1.2.2 (2025-10-28)

### 🐛 修复
- **修复窗口位置保存问题**: 修复软件重启后窗口位置无法正确保存和恢复的问题
- **修复自选股列表保存问题**: 修复软件重启后自选股列表无法正确保存和恢复的问题

---

## v1.2.1 (2025-10-28)

### 🎨 优化
- **修复发布日志显示问题**: 再次修复GitHub Actions工作流中多行文本处理问题，确保更新日志能正确显示在release页面

---

## v1.2.0 (2025-10-28)

### 🎨 优化
- **修复发布日志显示问题**: 修复GitHub Actions工作流中换行符处理问题，确保更新日志能正确显示在release页面

---

## v1.1.9 (2025-10-28)

### 🎨 优化
- **优化版本号管理**: 实现版本号集中管理，避免多处维护不一致问题

### 🔧 技术改进
- 创建独立的版本号文件(version.py)，解决循环导入问题
- 设置界面版本号自动从主版本号获取，无需手动维护

---

## v1.1.8 (2025-10-28)

### 🎨 优化
- **优化项目结构**: 移除重复的配置管理函数，统一使用config模块
- **优化数据处理模块**: 整理data模块，确保功能不重复且逻辑清晰
- **优化依赖管理**: 将测试依赖与生产依赖分离，提高安全性与可维护性
- **优化代码质量**: 清理无用代码和注释，保持代码整洁

### 🔧 技术改进
- 重构配置管理，移除main.py中重复的load_config和save_config函数
- 整理data模块结构，明确各文件职责并提供统一接口
- 分离生产依赖(requirements.txt)和开发依赖(requirements-dev.txt)
- 移除未使用的导入语句和冗余注释

---

## v1.1.7 (2025-10-27)

### 🎨 优化
- **优化市场状态条显示**: 调整市场状态条显示顺序，将平盘股票显示在中间位置
- **改进数据获取机制**: 确保市场状态条显示全市场数据而非自选股数据

### 🐛 修复
- **修复资源路径问题**: 修正资源文件路径指向错误的问题，确保程序能正确加载资源文件
- **修复股票代码冲突**: 增强数据获取逻辑，更好地处理上证指数和平安银行代码冲突问题

### 🔧 技术改进
- 改进股票数据库更新机制，完全依赖网络数据更新本地文件
- 优化市场状态条数据获取逻辑，确保显示准确的全市场红绿盘数据
- 调整绘制顺序，使平盘股票在状态条中显示在中间位置

---

## v1.1.6 (2025-10-23)

### 🎨 优化
- **优化颜色显示逻辑**: 修复5个点以上股票颜色显示问题，使用更亮的橙红色突出显示
- **统一红色显示风格**: 修复线条颜色和涨幅红色显示，确保与个股红盘颜色一致
- **优化大盘状态条**: 修复红盘数横线部分颜色，统一使用红色而非紫色

### 🐛 修复
- **修复封单数计算错误**: 修正封单数显示格式，7.89万手正确显示为77k而非7890k
- **修复涨停高亮颜色覆盖问题**: 涨停时不再强制使用红色，保持5个点以上的特殊颜色显示
- **修复颜色逻辑冲突**: 解决涨停高亮逻辑覆盖深红色设置的问题

### 🔧 技术改进
- 优化封单数计算算法，从/10000改为/100000，确保k单位显示准确
- 改进颜色判断逻辑，超过5%涨幅使用亮红色(#FF4500)而非深红色
- 统一所有红色显示为#e74c3f，超过5%使用#FF4500亮红色

---

## v1.1.5 (2025-10-23)

### 🎨 优化
- **优化项目结构**: 清理无用文件，统一资源文件管理
- **优化构建配置**: 更新build_config.py中的资源配置路径，确保正确引用资源文件

### 🐛 修复
- **修复资源文件重复问题**: 删除重复的PNG格式图标，统一使用ICO格式
- **修复模块导入问题**: 优化stock_monitor/ui/components.py中缺少的导入语句

---

## v1.1.4 (2025-09-24)

### 🐛 修复
- **修复上证指数与平安银行数据显示相同问题**: 优化股票数据键值映射逻辑，确保指数和个股即使具有相同数字代码部分也能正确区分显示

### 🔧 技术改进
- 改进数据获取和处理逻辑，增强键值匹配准确性
- 优化异常处理机制，提高程序稳定性和用户体验

---

## v1.1.3 (2025-08-04)

### 🐛 修复
- **修复Release说明中更新日志未显示问题**: 优化GitHub Actions工作流中的CHANGELOG.md提取逻辑，确保发布时能正确显示更新日志

### 🔧 技术改进
- 改进版本更新机制，确保版本号和更新日志在所有相关文件中同步更新
- 优化发布流程，提高自动化发布可靠性

---

## v1.1.2 (2025-08-04)

### 🛠 更新内容
- **调整版本更新机制**: 更新日志不再写入main.py文件，改为集中记录在CHANGELOG.md和README.md中
- **优化GitHub Actions工作流**: 从CHANGELOG.md提取更新日志用于Release发布，确保发布信息准确同步
- **改进发布流程**: 确保每次发布时，版本号和更新日志自动同步更新，提升发布效率和准确性

---

## v1.1.1 (2025-08-04)

### 🐛 修复
- **修复指数和个股数据混淆问题**: 解决了当指数和个股具有相同数字代码部分时（如sh000001和sz000001）导致的数据错误显示问题
- **优化数据获取策略**: 将批量获取方式改为逐一获取每只股票的数据，确保数据准确性和完整性

### 🔧 技术改进
- 重构数据获取逻辑，避免因API返回数据结构中的键冲突导致的数据覆盖问题
- 保持向后兼容性，确保现有功能不受影响

---

## v1.1.0 (2024-12-20)

### ✨ 新功能
- **新增GitHub Token输入框**：在设置界面添加GitHub Token配置功能，提高API请求频率
- **优化检查更新提示**：当触发API速率限制时，弹出提示建议添加GitHub Token
- **修复版本同步问题**：确保版本号和更新日志在所有文件中自动同步

### 🔧 技术改进
- 在设置界面添加GitHub Token输入框，实现Token的实时保存
- 优化检查更新流程，增加Token验证逻辑
- 统一所有文件的版本号格式，确保vX.X.X格式一致性

---

## v1.0.8 (2024-12-19)

### 🐛 修复
- **彻底修复平安银行与上证指数识别错误问题**: 改为单独请求每个股票代码，解决easyquotation库批量请求时数据混淆的问题
- **优化数据请求策略**: 使用股票代码作为键，确保每个股票数据准确对应
- **提升系统稳定性**: 改进数据获取逻辑，避免数据源层面的识别错误

### 🔧 技术改进
- 重构数据获取逻辑，从批量请求改为单独请求每个股票代码
- 实现智能键映射，自动处理数据源返回的数字键和完整代码键
- 保持向后兼容性，确保现有功能不受影响

---

## v1.0.7 (2024-12-19)

### 🐛 修复
- **修复平安银行与上证指数识别错误问题**: 解决了平安银行(sz000001)与上证指数(sh000001)因数字部分相同导致的识别错误问题
- **优化股票代码匹配逻辑**: 优先使用完整代码匹配，避免数字部分相同导致的混淆
- **提升数据识别准确性**: 确保股票数据准确识别，提升用户体验

### 🔧 技术改进
- 重构股票代码匹配逻辑，从 `code[-6:]` 改为优先完整代码匹配
- 保持向后兼容性，完整代码未找到时仍使用后6位数字匹配

---

## v1.0.6 (2024-12-19)

### 🐛 修复
- 修复pypinyin依赖未打包问题，完善requirements.txt，确保所有环境正常运行

---

## v1.0.5 (2024-12-19)

### ✨ 新功能
- 增加涨停/跌停封单手显示功能，自动识别并高亮
- 表格宽度可自适应封单手显示，内容不会被遮挡
- 封单手只显示数字，不显示"手"单位，显示更简洁
- ST股票支持拼音、首字母、去前缀模糊搜索，输入"st"或拼音片段可精准匹配

### 🔧 技术改进
- 本轮优化涵盖：主界面自适应、极简美观、自动升级、release日志自动提取、ST与封单功能增强

---

## v1.0.4 (2024-12-19)

### 🔧 技术改进
- 测试changelog自动提取功能

---

## v1.0.3 (2024-12-19)

### 🔧 技术改进
- 移除因数据源限制无法准确显示的封单手功能，主界面恢复为极简三列

---

## v1.0.2 (2024-12-19)

### 🔧 技术改进
- 测试自动升级功能

---

## v1.0.1 (2024-12-19)

### 🐛 修复
- 修复主窗口高度自适应逻辑，股票数量再多都能完整显示，不会被裁剪
- 采用真实行高动态调整，最小显示3行，边界精简

### ✨ 改进
- 体验更流畅，界面更美观