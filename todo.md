# é¡¹ç›®å¾…åŠäº‹é¡¹åˆ—è¡¨

## å¾…å®ç°åŠŸèƒ½

### æŒ‡æ•°å’Œæ¸¯è‚¡æ”¯æŒ
1. å®ç°æ¸¯è‚¡æ•°æ®æ”¯æŒ
   - å¯åŠ¨æ—¶ä»é¦™æ¸¯äº¤æ˜“æ‰€å®˜ç½‘è·å–æ¸¯è‚¡åˆ—è¡¨: https://www.hkex.com.hk/chi/services/trading/securities/securitieslists/ListOfSecurities_c.xlsx
   - è§£æExcelæ–‡ä»¶è·å–è‚¡ç¥¨ä»£ç å’Œåç§°
   - æ•´åˆåˆ°ç°æœ‰çš„è‚¡ç¥¨æ•°æ®ä¸­

2. å®ç°æŒ‡æ•°æ•°æ®æ”¯æŒ
   - ä»é¡¹ç›®æ•°æ®æºæ¥å£è·å–ä¸»è¦æŒ‡æ•°åˆ—è¡¨
   - åŒ…å«ä¸Šè¯æŒ‡æ•°ã€æ·±è¯æˆæŒ‡ã€åˆ›ä¸šæ¿æŒ‡ã€æ²ªæ·±300ç­‰ä¸»è¦æŒ‡æ•°
   - æ•´åˆåˆ°ç°æœ‰çš„è‚¡ç¥¨æ•°æ®ä¸­

3. æ•°æ®æ•´åˆä¸æœç´¢
   - ä¿®æ”¹è‚¡ç¥¨æœç´¢åŠŸèƒ½ï¼Œæ”¯æŒæ¸¯è‚¡å’ŒæŒ‡æ•°çš„æœç´¢
   - ç¡®ä¿æ¸¯è‚¡ã€æŒ‡æ•°ä¸Aè‚¡å…·æœ‰ç›¸åŒçš„å¤„ç†é€»è¾‘
   - ä¼˜åŒ–æœç´¢ç®—æ³•ä»¥å¤„ç†æ›´å¤šç±»å‹çš„è¯åˆ¸

4. UIç•Œé¢é€‚é…
   - ä¸ºä¸åŒç±»å‹çš„è¯åˆ¸æ·»åŠ ç‰¹å®šçš„emojiæ ‡è¯†
   - ç¡®ä¿ç•Œé¢èƒ½æ­£ç¡®æ˜¾ç¤ºæ¸¯è‚¡å’ŒæŒ‡æ•°ä¿¡æ¯
   - ä¿æŒé€æ˜ç£¨ç ‚ç»ç’ƒé£æ ¼çš„è®¾è®¡ä¸€è‡´æ€§

## å®ç°æ–¹æ¡ˆ

### æ¸¯è‚¡æ•°æ®è·å–ä¸å¤„ç†
1. åœ¨ [stock_monitor/data/updater.py](file:///d%3A/code/stock/stock_monitor/data/updater.py) ä¸­æ·»åŠ æ¸¯è‚¡æ•°æ®è·å–å‡½æ•°
   - ä½¿ç”¨ `requests` åº“ä¸‹è½½ Excel æ–‡ä»¶
   - ä½¿ç”¨ `openpyxl` è§£æ Excel æ–‡ä»¶
   - æå–è‚¡ç¥¨ä»£ç å’Œåç§°ä¿¡æ¯
   - ä¸ºæ¸¯è‚¡ä»£ç æ·»åŠ  `hk` å‰ç¼€ä»¥åŒºåˆ†Aè‚¡

2. ä¿®æ”¹ [stock_monitor/data/updater.py](file:///d%3A/code/stock/stock_monitor/data/updater.py) ä¸­çš„ `fetch_all_stocks` å‡½æ•°
   - æ•´åˆæ¸¯è‚¡æ•°æ®åˆ°ç°æœ‰çš„è‚¡ç¥¨æ•°æ®ä¸­
   - ç¡®ä¿æ¸¯è‚¡æ•°æ®ä¸Aè‚¡æ•°æ®æ ¼å¼ä¸€è‡´

3. ä¿®æ”¹ [stock_monitor/data/updater.py](file:///d%3A/code/stock/stock_monitor/data/updater.py) ä¸­çš„ `update_stock_database` å‡½æ•°
   - ç¡®ä¿æ›´æ–°æ•°æ®åº“æ—¶åŒ…å«æ¸¯è‚¡æ•°æ®

### æŒ‡æ•°æ•°æ®å¤„ç†
1. æ£€æŸ¥å¹¶å®Œå–„ç°æœ‰çš„æŒ‡æ•°æ•°æ®è·å–é€»è¾‘
   - ç¡®ä¿è·å–ä¸»è¦æŒ‡æ•°ï¼šsh000001(ä¸Šè¯æŒ‡æ•°)ã€sh000300(æ²ªæ·±300)ã€sz399001(æ·±è¯æˆæŒ‡)ã€sz399006(åˆ›ä¸šæ¿æŒ‡)
   - ç¡®ä¿æŒ‡æ•°æ•°æ®æ­£ç¡®æ•´åˆåˆ°è‚¡ç¥¨æ•°æ®åº“ä¸­

### æ•°æ®å¤„ç†ä¸æœç´¢
1. ä¿®æ”¹ [stock_monitor/data/stocks.py](file:///d%3A/code/stock/stock_monitor/data/stocks.py) ä¸­çš„æ‹¼éŸ³å¤„ç†å‡½æ•°
   - ç¡®ä¿æ”¯æŒæ¸¯è‚¡å’ŒæŒ‡æ•°çš„æ‹¼éŸ³å¤„ç†
   - ä¸ºä¸åŒç±»å‹çš„è¯åˆ¸æ·»åŠ é€‚å½“çš„æ‹¼éŸ³å¤„ç†é€»è¾‘

2. ä¿®æ”¹ [stock_monitor/ui/stock_search.py](file:///d%3A/code/stock/stock_monitor/ui/stock_search.py) ä¸­çš„æœç´¢åŠŸèƒ½
   - ç¡®ä¿èƒ½å¤Ÿæœç´¢æ¸¯è‚¡å’ŒæŒ‡æ•°
   - ä¼˜åŒ–æœç´¢ç®—æ³•ä»¥å¤„ç†æ›´å¤šç±»å‹çš„è¯åˆ¸

### UIç•Œé¢é€‚é…
1. ä¿®æ”¹ [stock_monitor/utils/helpers.py](file:///d%3A/code/stock/stock_monitor/utils/helpers.py) ä¸­çš„ `get_stock_emoji` å‡½æ•°
   - ä¸ºæ¸¯è‚¡æ·»åŠ ç‰¹å®šçš„emojiæ ‡è¯† (å¦‚ ğŸ‡­ğŸ‡°)
   - ä¸ºæŒ‡æ•°æ·»åŠ ç‰¹å®šçš„emojiæ ‡è¯† (å¦‚ ğŸ“ˆ å·²ç»å®ç°)
   - ä¸ºå…¶ä»–ç±»å‹è¯åˆ¸æ·»åŠ é€‚å½“çš„emojiæ ‡è¯†

2. ç¡®ä¿UIç»„ä»¶èƒ½å¤Ÿæ­£ç¡®æ˜¾ç¤ºæ¸¯è‚¡å’ŒæŒ‡æ•°ä¿¡æ¯
   - æ£€æŸ¥è‚¡ç¥¨è¡¨æ ¼æ˜¾ç¤º
   - æ£€æŸ¥è®¾ç½®ç•Œé¢çš„è‚¡ç¥¨åˆ—è¡¨æ˜¾ç¤º

### æŠ€æœ¯å®ç°ç»†èŠ‚

#### æ¸¯è‚¡æ•°æ®è·å–å‡½æ•°
```python
def fetch_hk_stocks() -> List[Dict[str, str]]:
    """
    ä»é¦™æ¸¯äº¤æ˜“æ‰€è·å–æ¸¯è‚¡åˆ—è¡¨æ•°æ®
    
    Returns:
        List[Dict[str, str]]: æ¸¯è‚¡åˆ—è¡¨ï¼Œæ¯ä¸ªå…ƒç´ åŒ…å«codeå’Œnameå­—æ®µ
    """
    # 1. ä¸‹è½½Excelæ–‡ä»¶
    # 2. è§£æExcelæ–‡ä»¶
    # 3. æå–è‚¡ç¥¨ä»£ç å’Œåç§°
    # 4. æ ¼å¼åŒ–ä¸ºç»Ÿä¸€çš„æ•°æ®ç»“æ„
    pass
```

#### ä¿®æ”¹ fetch_all_stocks å‡½æ•°
```python
def fetch_all_stocks() -> List[Dict[str, str]]:
    """
    è·å–æ‰€æœ‰è‚¡ç¥¨æ•°æ®ï¼ŒåŒ…æ‹¬Aè‚¡ã€æŒ‡æ•°å’Œæ¸¯è‚¡
    
    Returns:
        List[Dict[str, str]]: æ‰€æœ‰è‚¡ç¥¨åˆ—è¡¨
    """
    # 1. è·å–Aè‚¡æ•°æ®
    # 2. è·å–æŒ‡æ•°æ•°æ®
    # 3. è·å–æ¸¯è‚¡æ•°æ®
    # 4. åˆå¹¶æ‰€æœ‰æ•°æ®
    # 5. å»é‡å¤„ç†
    pass
```

#### ä¿®æ”¹ get_stock_emoji å‡½æ•°
```python
def get_stock_emoji(code, name):
    """
    æ ¹æ®è‚¡ç¥¨ä»£ç å’Œåç§°è¿”å›å¯¹åº”çš„emoji
    
    Args:
        code (str): è‚¡ç¥¨ä»£ç 
        name (str): è‚¡ç¥¨åç§°
        
    Returns:
        str: å¯¹åº”çš„emojiå­—ç¬¦
    """
    # æ·»åŠ æ¸¯è‚¡åˆ¤æ–­é€»è¾‘
    if code.startswith('hk'):
        return 'ğŸ‡­ğŸ‡°'
    # å…¶ä»–ç°æœ‰é€»è¾‘ä¿æŒä¸å˜
    # ...
```